"usestrict";var__assign=(this&&this.__assign)||function(){__assign=Object.assign||function(t){for(vars,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(varpins)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}returnt;};return__assign.apply(this,arguments);};varexports={};exports.__esModule=true;varisObject=function(value){returnvalue&&typeofvalue==="object"&&value.constructor===Object;};varisString=function(value){returntypeofvalue==="string"||valueinstanceofString;};varobjKeysMap=function(object,callback){try{Object.keys(object).map(function(item){returncallback(item);});}catch(error){}};varintDate=function(string){vardate=newDate();varwithInteger=newDate(date*1+string*864e5);return!!parseInt(string,10)?withInteger:string;};varcontains=function(object,value){return!isObject(object)?false:Object.keys(object).filter(function(item){returnitem===value;}).toString()===value&&isString(value);};varcache={};varoperator={localstorage:{parser:function(){returnwindow.localStorage;},get:function(key){returnwindow.localStorage.getItem(key);},set:function(key,value){returnwindow.localStorage.setItem(key,value);},unset:function(key){try{window.localStorage.removeItem(key);}catch(error){}},clear:function(){objKeysMap(window.localStorage,operator.localstorage.unset);},},sessionstorage:{parser:function(){returnwindow.sessionStorage;},get:function(key){returnwindow.sessionStorage.getItem(key);},set:function(key,value){returnwindow.sessionStorage.setItem(key,value);},unset:function(key){try{window.sessionStorage.removeItem(key);}catch(error){}},clear:function(){objKeysMap(window.sessionStorage,operator.sessionstorage.unset);},},cookie:{parser:function(){varall=document.cookie!==""?document.cookie.split(";"):[];if(all.length===0)return;returnall.map(function(val){returnval.split("=");}).reduce(function(acc,val){acc[decodeURIComponent(val[0])]=decodeURIComponent(val[1]);returnacc;},{});},set:function(key,val,parameters){if(parameters===void0){parameters={expires:"",path:"/",domain:""};}varexp=intDate(parameters.expires)||"";varpath=parameters.path||"";vardomain=parameters.domain||document.location.hostname;document.cookie=encodeURIComponent(key)+"="+encodeURIComponent(val)+';expires="'+exp+'";path='+path+";domain="+domain;},get:function(key){returncache[key];},unset:function(key){document.cookie=encodeURIComponent(key)+"=;expires=Thu,01Jan197000:00:00GMT;";cache[key]=undefined;},clear:function(){objKeysMap(operator.cookie.parser(),operator.cookie.unset);cache={};},},};varStorageManagerJs=function(manager){if(manager===void0){manager="cookie";}varmanagers=Object.freeze({c:"cookie",l:"localstorage",s:"sessionstorage",cookie:"cookie",localstorage:"localstorage",sessionstorage:"sessionstorage",});if(!!Storage){manager=managers[manager.toLowerCase()]||"cookie";}else{console.warn("Browser doesn't have support to Storage");manager="cookie";}returnObject.freeze({get:get,set:set,json:json,clear:clear,unset:unset,change:change,clearAll:clearAll,cat:get,all:json,item:get,rm:unset,touch:set,create:set,getItem:get,setItem:set,delete:unset,remove:unset,purge:clearAll,});functionjson(){varparser=operator[manager].parser();Object.keys(parser).map(function(item){var_a,_b;try{return(_a={}),(_a[item]=JSON.parse(parser[item])),_a;}catch(error){return(_b={}),(_b[item]=parser[item]),_b;}});}functionchange(value){if(value===void0){value="cookie";}if(contains(managers,value)){manager=managers[value.toLowerCase().trim()];}else{manager="cookie";}cache=operator[manager].parser();returnthis;}functionget(key,expect){varvalue=operator[manager].get(key);try{returnexpect==="raw"||expect==="r"?value:expect==="array"||expect==="a"?value.split(","):JSON.parse(value);}catch(error){returnvalue;}}functionset(key,value,expires){if(expires===void0){expires="";}var_a;operator[manager].set(key,JSON.stringify(value),expires);cache=__assign({},cache,((_a={}),(_a[key]=value),_a));returnthis;}functionunset(key){operator[manager].unset(key);returnthis;}functionclear(){operator[manager].clear();returnthis;}functionclearAll(){["cookie","localstorage","sessionstorage"].forEach(function(x){returnoperator[x].clear();});returnthis;}};exports["default"]=StorageManagerJs;
