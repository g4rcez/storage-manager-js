'use strict';var __assign=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a};exports.__esModule=!0;var isObject=function(a){return a&&'object'==typeof a&&a.constructor===Object},isString=function(a){return'string'==typeof a||a instanceof String},objectForIn=function(a,b){try{Object.keys(a).map(function(c){return b(c)})}catch(c){}},parseDateOrInteger=function(a){var b=new Date,c=new Date(1*b+864e5*a);return!parseInt(a,10)?a:c},objectContains=function(a,b){return!!isObject(a)&&Object.keys(a).filter(function(c){return c===b}).toString()===b&&isString(b)},cache={},storageOperator=function(a,b,c){return void 0===b&&(b=''),void 0===c&&(c=''),{parser:function(){return window[a]},get:function(d){return window[a][d]},set:function(d,e){window[a][d]=e},unset:function(d){window[a].removeItem(d)}}},operator={localstorage:{parser:function(){return storageOperator('localStorage').parser()},get:function(a){return storageOperator('localStorage').get(a)},set:function(a,b){storageOperator('localStorage').set(a,b)},unset:function(a){try{storageOperator('localStorage').unset(a)}catch(b){}},clear:function(){objectForIn(window.localStorage,operator.localstorage.unset)}},sessionstorage:{parser:function(){return storageOperator('sessionStorage').parser()},get:function(a){return storageOperator('sessionStorage').get(a)},set:function(a,b){storageOperator('sessionStorage').set(a,b)},unset:function(a){try{storageOperator('sessionStorage').unset(a)}catch(b){}},clear:function(){objectForIn(window.sessionStorage,operator.sessionstorage.unset)}},cookie:{parser:function(){var a=document.cookie?document.cookie.split('; '):[];return 0===a.length?void 0:a.map(function(b){return b.split('=')}).reduce(function(b,c){return b[decodeURIComponent(c[0])]=decodeURIComponent(c[1]),b},{})},set:function(a,b,c){void 0===c&&(c={path:'',domain:'',expires:''});var d=c.path||'',e=c.domain||'',f=parseDateOrInteger(c.expires)||'';document.cookie=encodeURIComponent(a)+'='+encodeURIComponent(b)+'; expires='+f+'; path=\''+d+'\';domain=\''+e+'\''},get:function(a){return cache[a]},unset:function(a){document.cookie=encodeURIComponent(a)+'=; expires=Thu, 01 Jan 1970 00:00:01 GMT;',cache[a]=void 0},clear:function(){objectForIn(operator.cookie.parser(),operator.cookie.unset),cache={}}}};function StorageManage(a){function d(k,l){var m=operator[a].get(k);try{return'raw'===l||'r'===l?m:'array'===l||'a'===l?m.split(','):JSON.parse(m)}catch(o){return m}}function e(k,l,m){void 0===m&&(m=''),operator[a].set(k,JSON.stringify(l),m);var o;cache=__assign({},cache,(o={},o[k]=l,o))}function f(k){operator[a].unset(k)}function h(){['cookie','localstorage','sessionstorage'].forEach(function(k){return operator[k].clear()})}var j=Object.freeze({c:'cookie',l:'localstorage',s:'sessionstorage',cookie:'cookie',localstorage:'localstorage',sessionstorage:'sessionstorage'});return Storage?a=j[a.toLowerCase()]||'cookie':(console.warn('Browser doesn\'t have support to Storage'),a='cookie'),Object.freeze({changeManager:function(k){a=objectContains(j,k)?j[k.toLowerCase().trim()]:'cookie',cache=operator[a].parser()},get:d,set:e,unset:f,clear:function(){operator[a].clear()},clearAll:h,item:d,getItem:d,cat:d,create:e,setItem:e,touch:e,delete:f,remove:f,rm:f,purge:h,json:function(){var k=operator[a].parser(),l={};return Object.keys(k).map(function(m){var o,q;try{l=__assign({},l,(o={},o[m]=JSON.parse(k[m]),o))}catch(r){l=__assign({},l,(q={},q[m]=k[m],q))}}),l}})}exports['default']=StorageManage;
